{% extends 'base.html' %}

{% block content %}
<div style="max-width: 600px; margin: 40px auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">

    <h2 style="text-align:center; margin-bottom:25px;">
        {% if accident %}Update{% else %}Add{% endif %} Accident
    </h2>

    <form method="post">
        {% csrf_token %}

        <div class="mb-3">
            <label>Reporter Name</label>
            <input type="text" name="reporter_name"
                   value="{{ accident.reporter_name|default:'' }}"
                   class="form-control" required>
        </div>

        <div class="mb-3">
            <label>Phone Number</label>
            <input type="text" name="phone_number"
                   value="{{ accident.phone_number|default:'' }}"
                   class="form-control" required>
        </div>

        <div class="mb-3">
            <label>Location</label>
            <input type="text" name="location"
                   value="{{ accident.location|default:'' }}"
                   class="form-control" required>
        </div>

        <div class="mb-3">
            <label>City</label>
            <input type="text" name="city"
                   value="{{ accident.city|default:'' }}"
                   class="form-control" required>
        </div>

        <div class="mb-3">
            <label>State</label>
            <input type="text" name="state"
                   value="{{ accident.state|default:'' }}"
                   class="form-control" required>
        </div>

        <div class="mb-3">
            <label>Accident Date</label>
            <input type="date" name="accident_date"
                   value="{{ accident.accident_date|default:'' }}"
                   class="form-control">
        </div>

        <div class="mb-3">
            <label>Accident Time</label>
            <input type="time" name="accident_time"
                   value="{{ accident.accident_time|default:'' }}"
                   class="form-control">
        </div>

        <div class="mb-3">
            <label>Vehicle Type</label>
            <select name="vehicle_type" class="form-control" required>
                <option value="">-- Select Vehicle --</option>
                <option value="Car" {% if accident.vehicle_type == "Car" %}selected{% endif %}>Car</option>
                <option value="Bike" {% if accident.vehicle_type == "Bike" %}selected{% endif %}>Bike</option>
                <option value="Truck" {% if accident.vehicle_type == "Truck" %}selected{% endif %}>Truck</option>
                <option value="Bus" {% if accident.vehicle_type == "Bus" %}selected{% endif %}>Bus</option>
            </select>
        </div>

        <div class="mb-3">
            <label>Severity</label>
            <select name="severity" class="form-control" required>
                <option value="">-- Select Severity --</option>
                <option value="Low" {% if accident.severity == "Low" %}selected{% endif %}>Low</option>
                <option value="Medium" {% if accident.severity == "Medium" %}selected{% endif %}>Medium</option>
                <option value="High" {% if accident.severity == "High" %}selected{% endif %}>High</option>
            </select>
        </div>

        <div class="mb-3">
            <label>Description</label>
            <textarea name="description" rows="4" class="form-control">
                {{ accident.description|default:'' }}
            </textarea>
        </div>

        {% if user.is_staff %}
        <div class="mb-3">
            <label>Status</label>
            <select name="status" class="form-control">
                <option value="Pending" {% if accident.status == "Pending" %}selected{% endif %}>Pending</option>
                <option value="Resolved" {% if accident.status == "Resolved" %}selected{% endif %}>Resolved</option>
            </select>
        </div>
        {% endif %}

        <div style="text-align:center; margin-top:20px;">
            <button type="submit" class="btn btn-primary">Save</button>
            <a href="{% url 'acci_list' %}" class="btn btn-secondary">Cancel</a>
        </div>

    </form>
</div>
{% endblock %}